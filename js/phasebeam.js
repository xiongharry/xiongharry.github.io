!function(e){var t=e("#phasebeam").children("canvas"),n=t[0],i=t[1],o=t[2],a={circle:{amount:18,layer:3,color:[157,97,207],alpha:.3},line:{amount:12,layer:3,color:[255,255,255],alpha:.3},speed:.5,angle:20};if(n.getContext){var r,l,s,c=n.getContext("2d"),d=i.getContext("2d"),p=o.getContext("2d"),h=window.Math,f=2*a.angle/360*h.PI,u=[],g=[];requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame||clearTimeout;var m=function(){r=e(window).width(),l=e(window).height(),t.each(function(){this.width=r,this.height=l})},y=function(e,t,n,i,o){var a=d.createRadialGradient(e,t,n,e,t,0);a.addColorStop(0,"rgba("+i[0]+","+i[1]+","+i[2]+","+o+")"),a.addColorStop(1,"rgba("+i[0]+","+i[1]+","+i[2]+","+(o-.1)+")"),d.beginPath(),d.arc(e,t,n,0,2*h.PI,!0),d.fillStyle=a,d.fill()},w=function(e,t,n,i,o){var a=e+h.sin(f)*n,r=t-h.cos(f)*n,l=p.createLinearGradient(e,t,a,r);l.addColorStop(0,"rgba("+i[0]+","+i[1]+","+i[2]+","+o+")"),l.addColorStop(1,"rgba("+i[0]+","+i[1]+","+i[2]+","+(o-.1)+")"),p.beginPath(),p.moveTo(e,t),p.lineTo(a,r),p.lineWidth=3,p.lineCap="round",p.strokeStyle=l,p.stroke()},v=function(){c.clearRect(0,0,r,l);var e=[];e[0]=c.createRadialGradient(.3*r,.1*l,0,.3*r,.1*l,.9*r),e[0].addColorStop(0,"rgb(0, 26, 77)"),e[0].addColorStop(1,"transparent"),c.translate(r,0),c.scale(-1,1),c.beginPath(),c.fillStyle=e[0],c.fillRect(0,0,r,l),e[1]=c.createRadialGradient(.1*r,.1*l,0,.3*r,.1*l,r),e[1].addColorStop(0,"rgb(0, 150, 240)"),e[1].addColorStop(.8,"transparent"),c.translate(r,0),c.scale(-1,1),c.beginPath(),c.fillStyle=e[1],c.fillRect(0,0,r,l),e[2]=c.createRadialGradient(.1*r,.5*l,0,.1*r,.5*l,.5*r),e[2].addColorStop(0,"rgb(40, 20, 105)"),e[2].addColorStop(1,"transparent"),c.beginPath(),c.fillStyle=e[2],c.fillRect(0,0,r,l)},x=function(){var e=h.sin(f),t=h.cos(f);if(a.circle.amount>0&&a.circle.layer>0){d.clearRect(0,0,r,l);for(var n=0,i=u.length;i>n;n++){var o=u[n],c=o.x,m=o.y,v=o.radius,b=o.speed;c>r+v?c=-v:-v>c?c=r+v:c+=e*b,m>l+v?m=-v:-v>m?m=l+v:m-=t*b,o.x=c,o.y=m,y(c,m,v,o.color,o.alpha)}}if(a.line.amount>0&&a.line.layer>0){p.clearRect(0,0,r,l);for(var k=0,i=g.length;i>k;k++){var o=g[k],c=o.x,m=o.y,C=o.width,b=o.speed;c>r+C*e?c=-C*e:-C*e>c?c=r+C*e:c+=e*b,m>l+C*t?m=-C*t:-C*t>m?m=l+C*t:m-=t*b,o.x=c,o.y=m,w(c,m,C,o.color,o.alpha)}}s=requestAnimationFrame(x)},b=function(){if(u=[],g=[],a.circle.amount>0&&a.circle.layer>0)for(var e=0;e<a.circle.amount/a.circle.layer;e++)for(var t=0;t<a.circle.layer;t++)u.push({x:h.random()*r,y:h.random()*l,radius:h.random()*(20+5*t)+(20+5*t),color:a.circle.color,alpha:.2*h.random()+(a.circle.alpha-.1*t),speed:a.speed*(1+.5*t)});if(a.line.amount>0&&a.line.layer>0)for(var n=0;n<a.line.amount/a.line.layer;n++)for(var i=0;i<a.line.layer;i++)g.push({x:h.random()*r,y:h.random()*l,width:h.random()*(20+5*i)+(20+5*i),color:a.line.color,alpha:.2*h.random()+(a.line.alpha-.1*i),speed:a.speed*(1+.5*i)});cancelAnimationFrame(s),s=requestAnimationFrame(x),v()};e(document).ready(function(){m(),b()}),e(window).resize(function(){m(),b()})}}(jQuery);